# VerneMQ Single Container Production Environment Configuration Template
# Copy this file to .env.prod and update the values

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# IMPORTANT: Change this to a unique, secret value for your deployment
DISTRIBUTED_COOKIE=CHANGE_THIS_SECRET_COOKIE_VALUE

# =============================================================================
# BUILD CONFIGURATION
# =============================================================================

# Build date for image versioning
BUILD_DATE=2025-12-17

# Git reference for image versioning
VCS_REF=main

# =============================================================================
# RESOURCE CONFIGURATION
# =============================================================================

# VerneMQ node name (single container)
VERNEMQ_NODENAME=VerneMQ@vernemq

# Maximum connections (optimized for IoT)
VERNEMQ_MAX_CONNECTIONS=50000

# Maximum message size in bytes (1MB)
VERNEMQ_MAX_MESSAGE_SIZE=1048576

# Maximum in-flight messages per connection
VERNEMQ_MAX_INFLIGHT_MESSAGES=20

# Maximum message queue size
VERNEMQ_MAX_MESSAGE_QUEUE_SIZE=1000

# Client expiration time
VERNEMQ_PERSISTENT_CLIENT_EXPIRATION=1d

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log levels
VERNEMQ_LOG_CONSOLE=file
VERNEMQ_LOG_ERROR=on
VERNEMQ_LOG_CONSOLE_LEVEL=info

# Memory high watermark
VERNEMQ_VMQ_MEMORY_HIGH_WATERMARK=0.75

# File descriptor limit
VERNEMQ_ULIMIT_OPEN_FILES=65536

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# Authentication settings
VERNEMQ_ALLOW_ANONYMOUS=off

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# MQTT ports
VERNEMQ_MQTT_DEFAULT_PORT=1883
VERNEMQ_MQTTS_DEFAULT_PORT=8883
VERNEMQ_MQTT_DEFAULT_WS_PORT=8080
VERNEMQ_MQTTS_DEFAULT_WS_PORT=8083

# Management ports
VERNEMQ_HTTP_DEFAULT_PORT=8888
VERNEMQ_HTTPS_DEFAULT_PORT=8889

# =============================================================================
# TLS/SSL CONFIGURATION (Optional)
# =============================================================================

# Uncomment and configure if using TLS/SSL
# VERNEMQ_LISTENER_SSL_DEFAULT=on
# VERNEMQ_LISTENER_SSL_DEFAULT_PORT=8883
# VERNEMQ_LISTENER_SSL_DEFAULT_PROTOCOLS=tlsv1.2,tlsv1.3
# VERNEMQ_LISTENER_SSL_DEFAULT_CACERTFILE=/opt/vernemq/etc/ssl/cacert.pem
# VERNEMQ_LISTENER_SSL_DEFAULT_CERTFILE=/opt/vernemq/etc/ssl/cert.pem
# VERNEMQ_LISTENER_SSL_DEFAULT_KEYFILE=/opt/vernemq/etc/ssl/key.pem

# =============================================================================
# PLUGIN CONFIGURATION (Optional)
# =============================================================================

# Enable webhooks for backend integration
# VERNEMQ_PLUGIN_VMQ_WEBHOOKS=on
# VERNEMQ_PLUGIN_VMQ_WEBHOOKS_HOOK_TIMEOUT=10000

# Enable HTTP publishing
# VERNEMQ_PLUGIN_VMQ_HTTP_PUB=on
# VERNEMQ_PLUGIN_VMQ_HTTP_PUB_BIND=127.0.0.1
# VERNEMQ_PLUGIN_VMQ_HTTP_PUB_PORT=8889

# Enable diversity plugin for database auth (requires external database)
# VERNEMQ_PLUGIN_VMQ_DIVERSITY=on
# VERNEMQ_VMQ_DIVERSITY_AUTH_BACKEND=vmq_plugin

# =============================================================================
# MONITORING & METRICS
# =============================================================================

# Enable metrics
VERNEMQ_METRICS_ENABLED=on

# Prometheus metrics endpoint
# VERNEMQ_METRICS_LISTENER=127.0.0.1:8889