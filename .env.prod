# VerneMQ Production Environment Configuration Template
# Copy this file to .env.prod and update the values

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# IMPORTANT: Change this to a unique, secret value for your deployment
DISTRIBUTED_COOKIE=vernemq_secret_cookie_1734424354

# PostgreSQL database password
POSTGRES_PASSWORD=vernemq_secure_production_password

# =============================================================================
# BUILD CONFIGURATION
# =============================================================================

# Build date for image versioning
BUILD_DATE=2025-12-17

# Git reference for image versioning
VCS_REF=main

# =============================================================================
# RESOURCE CONFIGURATION
# =============================================================================

# VerneMQ node name
VERNEMQ_NODENAME=VerneMQ@vernemq

# Maximum connections (optimized for IoT)
VERNEMQ_MAX_CONNECTIONS=50000

# Maximum message size in bytes (1MB)
VERNEMQ_MAX_MESSAGE_SIZE=1048576

# Maximum in-flight messages per connection
VERNEMQ_MAX_INFLIGHT_MESSAGES=20

# Maximum message queue size
VERNEMQ_MAX_MESSAGE_QUEUE_SIZE=1000

# Client expiration time
VERNEMQ_PERSISTENT_CLIENT_EXPIRATION=1d

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log levels
VERNEMQ_LOG_CONSOLE=file
VERNEMQ_LOG_ERROR=on
VERNEMQ_LOG_CONSOLE_LEVEL=info

# Memory high watermark
VERNEMQ_VMQ_MEMORY_HIGH_WATERMARK=0.75

# File descriptor limit
VERNEMQ_ULIMIT_OPEN_FILES=65536

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# Authentication settings
VERNEMQ_ALLOW_ANONYMOUS=off
VERNEMQ_PASSWORD_FILE=/opt/vernemq/etc/vmq.password
VERNEMQ_ACL_FILE=/opt/vernemq/etc/vmq.acl

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# MQTT ports
VERNEMQ_MQTT_DEFAULT_PORT=1883
VERNEMQ_MQTTS_DEFAULT_PORT=8883
VERNEMQ_MQTT_DEFAULT_WS_PORT=8080
VERNEMQ_MQTTS_DEFAULT_WS_PORT=8083

# Management ports
VERNEMQ_HTTP_DEFAULT_PORT=8888
VERNEMQ_HTTPS_DEFAULT_PORT=8889

# =============================================================================
# TLS/SSL CONFIGURATION (Optional)
# =============================================================================

# Uncomment and configure if using TLS/SSL
# VERNEMQ_LISTENER_SSL_DEFAULT=on
# VERNEMQ_LISTENER_SSL_DEFAULT_PORT=8883
# VERNEMQ_LISTENER_SSL_DEFAULT_PROTOCOLS=tlsv1.2,tlsv1.3
# VERNEMQ_LISTENER_SSL_DEFAULT_CACERTFILE=/opt/vernemq/etc/ssl/cacert.pem
# VERNEMQ_LISTENER_SSL_DEFAULT_CERTFILE=/opt/vernemq/etc/ssl/cert.pem
# VERNEMQ_LISTENER_SSL_DEFAULT_KEYFILE=/opt/vernemq/etc/ssl/key.pem

# =============================================================================
# DATABASE CONFIGURATION (Optional)
# =============================================================================

# PostgreSQL connection settings
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=vernemq
POSTGRES_USER=vernemq

# Redis connection settings
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DATABASE=0

# =============================================================================
# CLUSTERING CONFIGURATION
# =============================================================================

# Cluster discovery plugin
VERNEMQ_METADATA_PLUGIN=vmq_swc

# Cluster ports
VERNEMQ_CLUSTER_DEFAULT_PORT=44053
VERNEMQ_CLUSTER_SSL_DEFAULT_PORT=44054

# =============================================================================
# PLUGIN CONFIGURATION
# =============================================================================

# Enable webhooks for .NET backend integration
# VERNEMQ_PLUGIN_VMQ_WEBHOOKS=on
# VERNEMQ_PLUGIN_VMQ_WEBHOOKS_HOOK_TIMEOUT=10000

# Enable HTTP publishing
# VERNEMQ_PLUGIN_VMQ_HTTP_PUB=on
# VERNEMQ_PLUGIN_VMQ_HTTP_PUB_BIND=127.0.0.1
# VERNEMQ_PLUGIN_VMQ_HTTP_PUB_PORT=8889

# Enable diversity plugin for database auth
# VERNEMQ_PLUGIN_VMQ_DIVERSITY=on
# VERNEMQ_VMQ_DIVERSITY_AUTH_BACKEND=vmq_plugin

# =============================================================================
# MONITORING & METRICS
# =============================================================================

# Enable metrics
VERNEMQ_METRICS_ENABLED=on

# Prometheus metrics endpoint
# VERNEMQ_METRICS_LISTENER=127.0.0.1:8889

# =============================================================================
# RESOURCE LIMITS
# =============================================================================

# Docker container resource limits
VERNOMQ_MEMORY_LIMIT=2G
VERNOMQ_CPU_LIMIT=2.0
VERNOMQ_MEMORY_RESERVATION=1G
VERNOMQ_CPU_RESERVATION=1.0

# Redis resource limits
REDIS_MEMORY_LIMIT=512M
REDIS_MEMORY_RESERVATION=256M

# PostgreSQL resource limits
POSTGRES_MEMORY_LIMIT=1G
POSTGRES_MEMORY_RESERVATION=512M
